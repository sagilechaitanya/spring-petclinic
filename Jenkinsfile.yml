pool: "Default"
trigger:
  - azure
stages:
  - stage: "vcs"
    jobs:
      - job: "clonevcs"
        steps:
          - task: SonarQubePrepare@5
            inputs:
              SonarQube: 'chaitanya'
              scannerMode: 'Other' 
              extraProperties: 'sonar.projectKey=chaitanya012_springpetclinic'
          - task: Gradle@3
            inputs:
              gradleWrapperFile: 'gradlew'
              tasks: 'build'
              javaHomeOption:  'Path'
              jdkVersionOption: '1.17'
              jdkDirectory: /usr/lib/jvm/java-17-openjdk-amd64
              sonarQubeRunAnalysis: true
              sqGradlePluginVersionChoice: 'specify'
              sonarQubeGradlePluginVersion: '2.6.1'
           - task: PublishPipelineArtifact@1
             inputs:
               targetPath: '$(Pipeline.Workspace)'
               artifact: 'name'
               publishLocation: 'pipeline'    
